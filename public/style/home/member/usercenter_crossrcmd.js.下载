(function($){var crossRcmd={data:{},jsUrl:'https://img1.tuniucdn.com/mkt/2016022910/unti/countdown-sev.min.js',$el:null,$container:null,pageData:null,init:function($el){this.$el=$el;this.setCss($el);this.setCtn($el);this.setData();this.setFromUrl($el);},setFromUrl:function($el){$el.on('click','a[href]',function(){var time=new Date(new Date().getTime()+60000).toGMTString();document.cookie='from_url='+escape(window.location.href)+';expires='+time+';domain=.tuniu.com;path=/';});},setCtn:function($el){$el.css({'padding':'0','margin-top':'0'});this.$container=$('<div id="crsrecmd"><div class="loading"><img src="//img4.tuniucdn.com/img/2014103102/oneyuan/loadv2.gif" ><p>牛牛玩儿命加载中...</p></div></div>');$el.append(this.$container);},setData:function(){var self=this;self.data.tact=self.getCookie('_tact');self.data.bookCityCode=self.decodeCookie(self.getCookie('tuniuuser_citycode'));self.data.userId=self.getCookie('tuniuuser_id');$.ajax({type:'GET',url:'//www.tuniu.com/papi/crossRecmmend/index',data:self.data,dataType:'jsonp',jsonp:'callback',success:function(data){if(!data||!data.modules){self.$el.hide();console.log('data为空');return;}
self.pageData=data;self.$container.find('.loading').hide();self.initFrame(data);}});},setCss:function(){var css='@charset "UTF-8";*,body{margin:0}*{padding:0}body{overflow-x:hidden;background-color:#f8f8f8}a{text-decoration:none;z-index:9}a:focus{outline:0}.wrapper{width:712.84px;margin:0 auto}#crsrecmd{position:relative;width:710px;background-color:#fff;margin:20px auto 0;padding:20px 0 0}#crsrecmd .module-title{padding:0 20px;border-left:5px solid #4c5a65;color:#333;font-size:16px;position:relative;background:#fff;z-index:9}#crsrecmd .module-title a.more-right{float:right;font-size:12px;color:#999;margin-right:6px;line-height:24px}#crsrecmd .module-title a.more-right>i{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAAAAklEQVR4AewaftIAAAPgSURBVO3BX2iVdRjA8e/z7jjbGMl7U47B8KI/gzQUTboQpu5EebG3i7lXkThF2PlJsd11UZFzEtFduVGd3wsJ7iLlPe2i3lGGf9a6apEtJoLlRW4y57ronTKabjvnaaHhOJzj0cBNYp+PsASstbWO42xV1TrmichYPp//zhgzTgFhEVlrVwAHASMip4BRbqpX1SbAuq7b4fv+DLcIi6Snp+eR6enpCeC467qtvu9PsUAYhjVxHB8BGqqqqralUqk/mCcsgjAMK+M4HgKsMaaLO7DWtgOHgEpjzKzDIojjuBM4b4zpogxjTBdwHDjIPIf7zFpbCxjXdV+mgLW2I5PJdFLAdd1WwFhraxOUseNC28qxi1deRXgF5UmQBMIZ0O7hZPYLyhCRRuC07/tT3CXf96eCIDglIlsdyhi7eOVDRA4p8htCB8LbKNOqZNed9MPWc62V3IGq1gGj3LtRVa1LUEaVJDpnHtL3hrYcu8xtXetOtqaBQ79e5iPgdf4jVd2fyWT41759+zpYwKGEp0/4Bzb07940mDw6MbTl2GUKnE1mAxF5C5G96/t3r6EEERkD6inCGNPpOM4BEcmLSF5E8txWLyJjCYrY0L97Uy6XeyeXy+3ccaFt4zePd9+giBWrVn08Oxm/r3PaDHRThKoOAJ+EYVjj+/4UBYwxnRQIw7AmjuMmVW13KCI3l9+lcB2leuzSlecpIXdtcjPIRF50+/r+1vUUYYwZB2wcx1nuUhzHRwBrjBl3KGL4ufBNkB8Qfhzenv2KElTlCVVdA/piLi8PU9p+4AVrbTtlWGvbgQbXdTuYV0EJq1NPNaDsfMw8m7l0eGiGIiZ6zv3yaGrtZhz59mxTmKGEvr6+vO/7n87NzXU3Nzc3pVKpr7PZ7AwLhGFYk0wmvwTaqqqq1u7Zs+ca84QSnulvXX09J78LHB5Ohm9QwsbvX6qluvrqmU3BX5QRhmFlHMedgBGR08AoN9Wr6nbAAvuNMbPcItzB06d27dW8WkH7EpJ49+fk0eGNP6WrZ69ONqlqmwgfDDdlT3OPrLW1ItKoqnXME5ExVR0wxoxTQChj3Uk/iepnQD1wA1jJP4QTCVnx2lDT5yPcR8Jd2Np/IDE5d36LOvkGhD8TUjF8ZtvR8yxbtmzZsvtOWCAIgkZV7RWRlnQ6PcADoIIFoiga8TxvUFV7Pc8bjKJohCVWQYEoikY8zxtU1V7P8wajKBphCVVQRBRFI57nDapqr+d5g1EUjbBEHB5wQhFBEDSqaq+ItKTT6QGWkFAgCIJGVe0VkZZ0Oj3AEhMWCIKgUVV7RaQlnU4PsOx/4G/McanBd6fkggAAAABJRU5ErkJggg==);background-position:0 -23px;width:12px;height:12px;display:inline-block}#crsrecmd .module-title a.change-right{font-size:12px;color:#2DBB55;float:right;margin-right:6px;line-height:24px;cursor:pointer}#crsrecmd .module-title a.change-right>i{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAAAAklEQVR4AewaftIAAAPgSURBVO3BX2iVdRjA8e/z7jjbGMl7U47B8KI/gzQUTboQpu5EebG3i7lXkThF2PlJsd11UZFzEtFduVGd3wsJ7iLlPe2i3lGGf9a6apEtJoLlRW4y57ronTKabjvnaaHhOJzj0cBNYp+PsASstbWO42xV1TrmichYPp//zhgzTgFhEVlrVwAHASMip4BRbqpX1SbAuq7b4fv+DLcIi6Snp+eR6enpCeC467qtvu9PsUAYhjVxHB8BGqqqqralUqk/mCcsgjAMK+M4HgKsMaaLO7DWtgOHgEpjzKzDIojjuBM4b4zpogxjTBdwHDjIPIf7zFpbCxjXdV+mgLW2I5PJdFLAdd1WwFhraxOUseNC28qxi1deRXgF5UmQBMIZ0O7hZPYLyhCRRuC07/tT3CXf96eCIDglIlsdyhi7eOVDRA4p8htCB8LbKNOqZNed9MPWc62V3IGq1gGj3LtRVa1LUEaVJDpnHtL3hrYcu8xtXetOtqaBQ79e5iPgdf4jVd2fyWT41759+zpYwKGEp0/4Bzb07940mDw6MbTl2GUKnE1mAxF5C5G96/t3r6EEERkD6inCGNPpOM4BEcmLSF5E8txWLyJjCYrY0L97Uy6XeyeXy+3ccaFt4zePd9+giBWrVn08Oxm/r3PaDHRThKoOAJ+EYVjj+/4UBYwxnRQIw7AmjuMmVW13KCI3l9+lcB2leuzSlecpIXdtcjPIRF50+/r+1vUUYYwZB2wcx1nuUhzHRwBrjBl3KGL4ufBNkB8Qfhzenv2KElTlCVVdA/piLi8PU9p+4AVrbTtlWGvbgQbXdTuYV0EJq1NPNaDsfMw8m7l0eGiGIiZ6zv3yaGrtZhz59mxTmKGEvr6+vO/7n87NzXU3Nzc3pVKpr7PZ7AwLhGFYk0wmvwTaqqqq1u7Zs+ca84QSnulvXX09J78LHB5Ohm9QwsbvX6qluvrqmU3BX5QRhmFlHMedgBGR08AoN9Wr6nbAAvuNMbPcItzB06d27dW8WkH7EpJ49+fk0eGNP6WrZ69ONqlqmwgfDDdlT3OPrLW1ItKoqnXME5ExVR0wxoxTQChj3Uk/iepnQD1wA1jJP4QTCVnx2lDT5yPcR8Jd2Np/IDE5d36LOvkGhD8TUjF8ZtvR8yxbtmzZsvtOWCAIgkZV7RWRlnQ6PcADoIIFoiga8TxvUFV7Pc8bjKJohCVWQYEoikY8zxtU1V7P8wajKBphCVVQRBRFI57nDapqr+d5g1EUjbBEHB5wQhFBEDSqaq+ItKTT6QGWkFAgCIJGVe0VkZZ0Oj3AEhMWCIKgUVV7RaQlnU4PsOx/4G/McanBd6fkggAAAABJRU5ErkJggg==);background-position:0 0;width:24px;height:23px;display:inline-block;vertical-align:bottom}#crsrecmd .loading{text-align:center;font-size:14px;color:#333;padding:50px}#crsrecmd .module-ctn{margin-bottom:20px}#crsrecmd .module-ctn+.module-ctn .module-list:after{content:"";width:660px;position:absolute;left:50%;height:1px;line-height:1px;max-height:1px;background:#ddd;display:block;margin-left:-330px;margin-top:-60px;top:0}#crsrecmd .module-ctn+.guesslike-module .module-list:after{margin-left:-341px}#crsrecmd .module-list{width:660px;position:relative;margin:20px auto 0;padding-bottom:18px;font-size:0}#crsrecmd .module-list>a{position:relative;display:inline-block;width:205px;height:167px;margin-left:21px;overflow:hidden;transition-property:box-shadow;transition-duration:.3s}#crsrecmd .module-list>a:first-child{margin-left:0}#crsrecmd .module-list>a:hover{box-shadow:#ffab80 0 0 11px}#crsrecmd .module-list>a .thumb-ctn{position:relative;width:205px;height:116px;overflow:hidden}#crsrecmd .module-list>a .thumb-ctn>img{display:block;width:100%;height:100%}#crsrecmd .module-list>a .thumb-ctn .tag-ctn{position:absolute;left:0;top:0;font-size:12px;color:#fff;height:22px;line-height:18px;width:100%;overflow:hidden}#crsrecmd .module-list>a .thumb-ctn .tag-ctn span.tag{padding:2px 5px;display:inline-block}#crsrecmd .module-list>a .thumb-ctn .title-line1,#crsrecmd .module-list>a .thumb-ctn .title-line2{position:absolute;bottom:0;overflow:hidden;padding:0 5px;background:#000;background:rgba(0,28,46,.6);left:0;right:0;font-size:14px;color:#fff}#crsrecmd .module-list>a .thumb-ctn .title-line1{height:29px;line-height:29px;text-overflow:ellipsis;white-space:nowrap}#crsrecmd .module-list>a .thumb-ctn .title-line2{padding:8px 5px}#crsrecmd .module-list>a .thumb-ctn .title-line2>p{height:36px;line-height:18px;overflow:hidden}#crsrecmd .module-list>a .pdt-content{position:absolute;bottom:16px;left:10px;right:10px}#crsrecmd .module-list>a .pdt-content span.price{font-size:12px;color:#f60;line-height:18px;display:inline-block}#crsrecmd .module-list>a .pdt-content span.price>b{font-size:20px;margin:0 4px}#crsrecmd .module-list>a .pdt-content span.info-right{position:absolute;bottom:2px;right:0;font-size:12px;color:#999}#crsrecmd .next-module .module-title span.sub-title{font-size:12px;color:#666;margin-left:20px}#crsrecmd .next-module .module-list{margin:9px auto 0;height:92px}#crsrecmd .next-module .module-list a{position:relative;display:inline-block;color:#666;width:132px;text-align:center;padding:12px 0 9px}#crsrecmd .next-module .module-list a span.name{font-size:14px;line-height:20px;margin-top:5px;display:block}#crsrecmd .next-module .page{display:none;position:absolute;width:100%}#crsrecmd .next-module .page.cur{display:block}#crsrecmd .next-module .navi{position:absolute;width:100%;text-align:center;font-size:0;bottom:18px}#crsrecmd .next-module .navi span{width:20px;height:3px;display:inline-block;background:#ccc;margin-left:3px;cursor:pointer;transition-property:background;transition-duration:.3s}#crsrecmd .next-module .navi span:first-child{margin-left:0}#crsrecmd .next-module .navi span.cur{background:#22c233}#crsrecmd .next-module .icon{width:34px;height:34px;display:block;margin:0 auto}#crsrecmd .interest-module .module-list>a{height:190px}#crsrecmd .interest-module .module-list>a .tag-bottom{position:absolute;width:100%;bottom:5px;font-size:12px;height:18px;color:#fff;overflow:hidden;line-height:18px}#crsrecmd .interest-module .module-list>a .tag-bottom span.tag{background:#000;background:rgba(0,0,0,.6);padding:0 4px;margin-left:5px;border-radius:2px;display:inline-block}#crsrecmd .interest-module .module-list>a .interest-title{font-size:18px;color:#333;line-height:28px;text-align:center}#crsrecmd .interest-module .module-list>a .interest-subtitle{font-size:14px;color:#999;line-height:22px;text-align:center}#crsrecmd .interest-module .module-list>a .interest-subtitle span{color:#f80}#crsrecmd .spsale-module .module-list>a{height:193px}#crsrecmd .spsale-module .module-list>a span.price{margin-bottom:11px}#crsrecmd .spsale-module .module-list>a span.info-right{bottom:26px}#crsrecmd .spsale-module .module-list>a span.discount{background:url(//ssl1.tuniucdn.com/img/2016061310/index_v4/index_icon.png) -54px -36px no-repeat;width:42px;height:15px;line-height:16px;text-align:center;color:#f60;font-family:arial;margin-top:3px;font-size:12px;display:inline-block;margin-left:5px;vertical-align:top}#crsrecmd .spsale-module .module-list>a span.time{position:relative;font-size:12px;color:#999;display:block}#crsrecmd .spsale-module .module-list>a span.time>i{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAAAAklEQVR4AewaftIAAAPgSURBVO3BX2iVdRjA8e/z7jjbGMl7U47B8KI/gzQUTboQpu5EebG3i7lXkThF2PlJsd11UZFzEtFduVGd3wsJ7iLlPe2i3lGGf9a6apEtJoLlRW4y57ronTKabjvnaaHhOJzj0cBNYp+PsASstbWO42xV1TrmichYPp//zhgzTgFhEVlrVwAHASMip4BRbqpX1SbAuq7b4fv+DLcIi6Snp+eR6enpCeC467qtvu9PsUAYhjVxHB8BGqqqqralUqk/mCcsgjAMK+M4HgKsMaaLO7DWtgOHgEpjzKzDIojjuBM4b4zpogxjTBdwHDjIPIf7zFpbCxjXdV+mgLW2I5PJdFLAdd1WwFhraxOUseNC28qxi1deRXgF5UmQBMIZ0O7hZPYLyhCRRuC07/tT3CXf96eCIDglIlsdyhi7eOVDRA4p8htCB8LbKNOqZNed9MPWc62V3IGq1gGj3LtRVa1LUEaVJDpnHtL3hrYcu8xtXetOtqaBQ79e5iPgdf4jVd2fyWT41759+zpYwKGEp0/4Bzb07940mDw6MbTl2GUKnE1mAxF5C5G96/t3r6EEERkD6inCGNPpOM4BEcmLSF5E8txWLyJjCYrY0L97Uy6XeyeXy+3ccaFt4zePd9+giBWrVn08Oxm/r3PaDHRThKoOAJ+EYVjj+/4UBYwxnRQIw7AmjuMmVW13KCI3l9+lcB2leuzSlecpIXdtcjPIRF50+/r+1vUUYYwZB2wcx1nuUhzHRwBrjBl3KGL4ufBNkB8Qfhzenv2KElTlCVVdA/piLi8PU9p+4AVrbTtlWGvbgQbXdTuYV0EJq1NPNaDsfMw8m7l0eGiGIiZ6zv3yaGrtZhz59mxTmKGEvr6+vO/7n87NzXU3Nzc3pVKpr7PZ7AwLhGFYk0wmvwTaqqqq1u7Zs+ca84QSnulvXX09J78LHB5Ohm9QwsbvX6qluvrqmU3BX5QRhmFlHMedgBGR08AoN9Wr6nbAAvuNMbPcItzB06d27dW8WkH7EpJ49+fk0eGNP6WrZ69ONqlqmwgfDDdlT3OPrLW1ItKoqnXME5ExVR0wxoxTQChj3Uk/iepnQD1wA1jJP4QTCVnx2lDT5yPcR8Jd2Np/IDE5d36LOvkGhD8TUjF8ZtvR8yxbtmzZsvtOWCAIgkZV7RWRlnQ6PcADoIIFoiga8TxvUFV7Pc8bjKJohCVWQYEoikY8zxtU1V7P8wajKBphCVVQRBRFI57nDapqr+d5g1EUjbBEHB5wQhFBEDSqaq+ItKTT6QGWkFAgCIJGVe0VkZZ0Oj3AEhMWCIKgUVV7RaQlnU4PsOx/4G/McanBd6fkggAAAABJRU5ErkJggg==);background-position:-24px 0;width:16px;height:16px;display:inline-block;vertical-align:bottom;margin-right:2px}#crsrecmd .spsale-module .module-list>a span.time .counter{display:inline-block;line-height:16px;color:#999}#crsrecmd .spsale-module .module-list>a span.time .counter>span{color:#000}#crsrecmd .guesslike-module{margin-bottom:0}#crsrecmd .guesslike-module .module-list{margin:20px 0 0 25px;width:680px}#crsrecmd .guesslike-module .module-list>a{margin:0 21px 20px 0}';var styleElement=document.createElement('style');styleElement.type='text/css';if(styleElement.styleSheet){styleElement.styleSheet.cssText=css;}else{styleElement.appendChild(document.createTextNode(css));}
document.getElementsByTagName('head')[0].appendChild(styleElement);},setCountdown:function(){var self=this;$.getScript(self.jsUrl,function(){$('.counter').each(function(index){$(this).countdown(function(item,counter){setTimeout(function(){$('.time').css('opacity','1');},1500);},function(item,counter){});});});},decodeCookie:function(code){var base=new Base64();var result=null;if(code){result=base.decode(code);}
return result;},getCookie:function(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(arr=document.cookie.match(reg)){return decodeURIComponent(arr[2]);}
else
return null;},bindEvent:function(){var self=this;$('.module-ctn').each(function(){if($(this).hasClass('next-module')){var $el=$(this);$el.find('.navi span').on('mouseenter',function(){var index=$(this).index();$el.find('.page').eq(index).addClass('cur').siblings('.page').removeClass('cur');$(this).addClass('cur').siblings().removeClass('cur');});}});$('.change-right').on('click',function(){var index=$(this).parents('.module-ctn').index()-1;self.reloadModule(index,self.pageData.modules[index]);if($(this).parents('.module-ctn').hasClass('spsale-module')){self.setCountdown();}});},initFrame:function(data){for(var i=0,len=data.modules.length;i<len;i++){this.setModule(data.modules[i],data.dstName);}
this.bindEvent();},buildTapstUrl:function(url){url+=~url.indexOf('?')?'&':'?'
return url;},setModule:function(module,dstName){var $moduleCtn=$('<div class="module-ctn"></div>'),$title=$('<p class="module-title"></p>'),$moduleList=$('<div class="module-list"></div>'),tmpHTML='',limit=3,i=0,moreHTML='',moduleInfo={type:module.moduleType,title:module.title,dstName:dstName?dstName:'',len:module.productItems.length},dstName=dstName||'',self=this;if(limit>moduleInfo.len){limit=moduleInfo.len;}
if(module.title){var subTitle=module.subTitle?'<span class="sub-title">'+module.subTitle+'</span>':'';var more='';var change='';if(module.moreType==2){if(module.productItems.length>6||(module.moduleType!=1&&module.productItems.length>3)){change='<a class="change-right" href="javascript:;"><i></i>换一换</a>';}}
if(module.moreType==1&&(module.moduleType==3||module.moduleType==9||module.moduleType==10||module.moduleType==11)&&moduleInfo.len>=1){switch(module.moduleType){case 3:case'3':moreHTML='更多酒店';break;case 9:case'9':moreHTML='更多景点门票';break;case 10:case'10':moreHTML='更多当地参团';break;case 11:case'11':moreHTML='更多当地玩乐';break;}
more='<a href="'+self.buildTapstUrl(module.moreUrl)+'ta_pst=点击_会员首页_'+module.title+'_'+dstName+'_'+moreHTML+'" class="more-right" target="_blank"'+'m=点击_会员首页_'+module.title+'_'+dstName+'_'+moreHTML+'">'+moreHTML+'<i></i></a>';}
$title.html(module.title+subTitle+more+change);$moduleCtn.append($title);}
if(module.moduleType==4||module.moduleType==5||module.moduleType==6||module.moduleType==7||module.moduleType==14&&moduleInfo.len>=1){switch(module.moduleType){case 4:case'4':$moduleCtn.addClass('interest-module');break;case 6:case'6':$moduleCtn.addClass('spsale-module');break;case 14:case'14':$moduleCtn.addClass('guesslike-module');if(moduleInfo.len>=6){limit=6;}else{limit=moduleInfo.len;}
break;}
for(;i<limit;i++){moduleInfo.index=i;moduleInfo.productItem=module.productItems[i];tmpHTML+=self.getProduct(moduleInfo);}
if(change){if(module.moduleType!==7){$title.find('.change-right').attr('m',('点击_会员首页_'+module.title.replace(moduleInfo.dstName,'')+'_'+dstName+'_换一换'));}else{$title.find('.change-right').attr('m',('点击_会员首页_同城人都在看_'+module.title.replace('人民都在看','')+'_'+dstName+'_换一换'));}}
if(!tmpHTML){$moduleCtn.hide();}
$moduleList.append($(tmpHTML));$moduleCtn.append($moduleList);if(module.moduleType==6){self.setCountdown();}}
if(module.moduleType==2&&moduleInfo.len>=1){var $nav=$('<div class="navi"></div>');$moduleCtn.addClass('next-module');for(;i<moduleInfo.len;i++){moduleInfo.index=i;moduleInfo.productItem=module.productItems[i];tmpHTML+=self.getProduct(moduleInfo);if(i%5===0){$nav.append('<span class=""></span>');}}
$moduleList.append($(tmpHTML));if($nav.find('span').length>1){$moduleList.append($nav);$nav.find('span').eq(0).addClass('cur');}else{$moduleList.css('padding-bottom','0');}
$moduleList.find('.page').eq(0).addClass('cur');$moduleCtn.append($moduleList);}
if(module.moduleType==3||module.moduleType==9||module.moduleType==10||module.moduleType==11&&moduleInfo.len>=1){for(;i<limit;i++){moduleInfo.index=i;moduleInfo.productItem=module.productItems[i];tmpHTML+=self.getProduct(moduleInfo);}
$moduleList.append($(tmpHTML));$moduleCtn.append($moduleList);}
if(tmpHTML){this.$container.append($moduleCtn);}},reloadModule:function(index,module){var reloadHTML='',$moduleList=$('.module-ctn').eq(index).find('.module-list'),limit=$moduleList.children().length,len=module.productItems.length,self=this,changeIndex,moduleInfo={type:module.moduleType,title:module.title};$moduleList.children('a').each(function(){changeIndex=parseInt($(this).attr('data-change'))+limit;if(changeIndex>len-1){changeIndex=changeIndex%len;}
moduleInfo.index=changeIndex;moduleInfo.productItem=module.productItems[changeIndex];reloadHTML+=self.getProduct(moduleInfo);});$moduleList.html(reloadHTML);},getTag:function(destName,iconType){var tag=this.getTagInfo(iconType),tagName=destName+'&nbsp;|&nbsp;'+tag.name,tagColor=tag.color,tagHTML='';if(tag.name){tagHTML='<span class="tag" style="background-color:'+tagColor+'">'+tagName+'</span>';}
return tagHTML;},getTagInfo:function(type){var tag={name:'',color:''};if(type==1){tag.name='跟团';tag.color='#2dbb55';}else if(type==2){tag.name='自助';tag.color='#13bcc4';}else if(type==3){tag.name='邮轮';tag.color='#3aaeff';}else if(type==4){tag.name='门票';tag.color='#fc9153';}else if(type==8){tag.name='自驾';tag.color='#3aaeff';}else if(type==9){tag.name='签证';tag.color='#13bcc4';}else if(type==96){tag.name='当地玩乐';tag.color='#9b6ed1';}else if(type==99){tag.name='目的地参团';tag.color='#9b6ed1';}else if(type==950){tag.name='超级自由行';tag.color='#2dbb55';}else if(type==233){tag.name='包团游';tag.color='#2dbb55';}else if(type==234){tag.name='定制游';tag.color='#13bcc4';}else{tag.name='其它';tag.color='#13bcc4';}
return tag;},getProduct:function(moduleInfo){var self=this,tagHTML='',tmpHTML='',productItem=moduleInfo.productItem;moduleInfo.dstName=moduleInfo.dstName||'';if(productItem.destName||productItem.recommendTypeDesc||moduleInfo.type==11){tagHTML='<div class="tag-ctn">';if(moduleInfo.type==11){tagHTML+='<span class="tag" style="background-color:#9b6ed1;">'+productItem.extLabelDesc+'</span>';}else if(productItem.destName&&productItem.iconType&&moduleInfo.type!=6){tagHTML+=self.getTag(productItem.destName,productItem.iconType);}
if(productItem.recommendTypeDesc&&moduleInfo.type==5){tagHTML+='<span class="tag" style="background-color:#001C2E;background-color: rgba(0,28,46,0.6);">'+productItem.recommendTypeDesc+'</span>';}
tagHTML+='</div>';}
if(moduleInfo.type==14){tmpHTML+='<a href="'+self.buildTapstUrl(productItem.url)+'ta_pst=点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'
+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'+productItem.itemName+'" data-change="'+moduleInfo.index+'" m="点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'+productItem.itemName+'" target="_blank"><div class="thumb-ctn"><img src="'
+productItem.picUrl.replace(/(\.\w+)$/,'_w240_h135_c1_t0$1')+'" >'+tagHTML+'<div class="title-line2"><p>'+productItem.itemName
+'</p></div></div><div class="pdt-content"><span class="price">￥<b>'+productItem.price
+'</b>起</span>'
+(productItem.satisfactionDesc?'<span class="info-right">'+productItem.satisfactionDesc+'</span>':'')
+'</div></a>';}else if(moduleInfo.type==4){$.each(productItem.recommendPois,function(i){tagHTML+='<span class="tag">'+productItem.recommendPois[i]+'</span>';});tmpHTML+='<a href="'+self.buildTapstUrl(productItem.url)+'ta_pst=点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'
+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'+productItem.itemName+'" data-change="'+moduleInfo.index+'" m="点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'+productItem.itemName+'" target="_blank"><div class="thumb-ctn"><img src="'
+productItem.picUrl.replace(/(\.\w+)$/,'_w240_h135_c1_t0$1')
+'" ><div class="tag-bottom">'+tagHTML+'</div></div><div class="pdt-content"><div class="interest-title">'
+productItem.itemName+'</div><div class="interest-subtitle"><span>'
+productItem.travelNumDesc.replace('人出游','')+'</span>人出游</div></div></a>';}else if(moduleInfo.type==3){tmpHTML+='<a href="'+self.buildTapstUrl(productItem.url)+'ta_pst=点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'
+moduleInfo.dstName+'_'+(moduleInfo.index+1)+'_'
+productItem.itemName+'" m="点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'+moduleInfo.dstName+'_'+(moduleInfo.index+1)+'_'
+productItem.itemName+'" target="_blank"><div class="thumb-ctn"><img src="'
+productItem.picUrl.replace(/(\.\w+)$/,'_w240_h135_c1_t0$1')
+'" ><div class="tag-ctn">'
+(productItem.extLabelDesc?'<span class="tag" style="background-color: #FF5858;">'+productItem.extLabelDesc+'</span>':'')
+'</div><div class="title-line1">'+productItem.itemName
+'</div></div><div class="pdt-content"><span class="price">￥<b>'+productItem.price
+'</b>起</span><span class="info-right">'+productItem.recommendTypeDesc+'</span></div></a>';}else if(moduleInfo.type==2){if(productItem.url&&productItem.itemName){if(moduleInfo.index%5===0){tmpHTML+='<div class="page">';}
tmpHTML+='<a href="'+self.buildTapstUrl(productItem.url)+'ta_pst=点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')
+'_'+moduleInfo.dstName+'_'+(moduleInfo.index+1)+'_'
+productItem.itemName+'" m="点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')
+'_'+moduleInfo.dstName+'_'+(moduleInfo.index+1)+'_'
+productItem.itemName+'" target="_blank"><span class="icon" style="background-image:url('
+productItem.picUrl+')"></span><span class="name">'+productItem.itemName+'</span></a>';if(moduleInfo.index%5==4){tmpHTML+='</div>';}}
if(moduleInfo.index==moduleInfo.len-1&&moduleInfo.index%5!=4){tmpHTML+='</div>';}}else if(moduleInfo.type==9){tmpHTML+='<a href="'+self.buildTapstUrl(productItem.url)+'ta_pst=点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'
+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'+productItem.itemName+'" data-change="'+moduleInfo.index+'" m="点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'+productItem.itemName+'" target="_blank"><div class="thumb-ctn"><img src="'
+productItem.picUrl.replace(/(\.\w+)$/,'_w240_h135_c1_t0$1')
+'" ><div class="tag-ctn">'+
(productItem.extLabelDesc?('<span class="tag" style="background-color: #FC9153;">'+productItem.extLabelDesc+'</span>'):'')
+'</div><div class="title-line1">'
+productItem.itemName+'</div></div><div class="pdt-content"><span class="price">￥<b>'+productItem.price
+'</b>起</span><span class="info-right">'
+(productItem.remarkNum?(productItem.remarkNum+'人评价'):'')+'</span></div></a>';}else if(moduleInfo.type==5||moduleInfo.type==10||moduleInfo.type==11){tmpHTML+='<a href="'+self.buildTapstUrl(productItem.url)+'ta_pst=点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'
+moduleInfo.dstName+'_'+(moduleInfo.index+1)+'_'+moduleInfo.dstName+'_'+productItem.itemName
+'" data-change="'+moduleInfo.index+'" m="点击_会员首页_'+moduleInfo.title.replace(moduleInfo.dstName,'')+'_'+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'+productItem.itemName+'" target="_blank"><div class="thumb-ctn"><img src="'
+productItem.picUrl.replace(/(\.\w+)$/,'_w240_h135_c1_t0$1')
+'" ><div class="tag-ctn">'+tagHTML
+'</div><div class="title-line2"><p>'
+productItem.itemName+'</p></div></div><div class="pdt-content"><span class="price">￥<b>'+productItem.price
+'</b>起</span><span class="info-right">'
+(productItem.satisfactionDesc?productItem.satisfactionDesc:'')+'</span></div></a>';}else if(moduleInfo.type==7){tmpHTML+='<a href="'+self.buildTapstUrl(productItem.url)+'ta_pst=点击_会员首页_同城人都在看_'+(moduleInfo.index+1)+'_'+moduleInfo.title.replace('人民都在看','')+'_'+moduleInfo.dstName+'-'+productItem.itemName
+'" data-change="'+moduleInfo.index+'" m="点击_会员首页_同城人都在看_'+(moduleInfo.index+1)+'_'+moduleInfo.title.replace('人民都在看','')
+'_'+moduleInfo.dstName+'-'+productItem.itemName+'" target="_blank"><div class="thumb-ctn"><img src="'
+productItem.picUrl.replace(/(\.\w+)$/,'_w240_h135_c1_t0$1')
+'" ><div class="tag-ctn">'+tagHTML
+'</div><div class="title-line2"><p>'
+productItem.itemName+'</p></div></div><div class="pdt-content"><span class="price">￥<b>'+productItem.price
+'</b>起</span><span class="info-right">'
+productItem.satisfactionDesc+'</span></div></a>';}else if(moduleInfo.type==6){tmpHTML+='<a href="'+self.buildTapstUrl(productItem.url)+'ta_pst=点击_会员首页_'+moduleInfo.title+'_'+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'
+productItem.itemName+'" data-change="'+moduleInfo.index+'" m="点击_会员首页_'+moduleInfo.title
+'_'+(moduleInfo.index+1)
+'_'+moduleInfo.dstName+'_'+productItem.itemName+'" target="_blank"><div class="thumb-ctn"><img src="'
+productItem.picUrl.replace(/(\.\w+)$/,'_w240_h135_c1_t0$1')
+'" ><div class="tag-ctn">'+tagHTML
+'</div><div class="title-line2"><p>'
+productItem.itemName+'</p></div></div><div class="pdt-content"><span class="price">￥<b>'+productItem.price
+'</b>起</span><span class="discount">'+productItem.recommendTypeDesc+'</span><br/><span class="time" style="opacity:0;"><i></i><div class="counter" match="<span><%day%></span>天<span><%hour%></span>时<span><%minute%></span>分<span><%second%></span>秒" start-date="'+new Date()+'" end-date="'+productItem.campaignEndTime+'"></div></span></div></a>';}
return tmpHTML;}};function Base64(){var _keyStr='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';var _utf8_decode=function(utftext){var string='';var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return string;};this.decode=function(input){var output='';var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,'');while(i<input.length){enc1=_keyStr.indexOf(input.charAt(i++));enc2=_keyStr.indexOf(input.charAt(i++));enc3=_keyStr.indexOf(input.charAt(i++));enc4=_keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);}
if(enc4!=64){output=output+String.fromCharCode(chr3);}}
output=_utf8_decode(output);return output;};}
$.fn.CrossRecommend=function(){crossRcmd.init(this);};})(jQuery);