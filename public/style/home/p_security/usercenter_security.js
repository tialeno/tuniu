var security={init:function(){var writeSecQues=$("#writeSecQues");this.changeSecu(writeSecQues);var deleteAccount=$("#deleteAccount");this.showDeleteAccountInfo(deleteAccount)},showDeleteAccountInfo:function(ele){ele.bind("click",function(){$.layer({type:1,title:"注销账户",shadeClose:true,btns:1,btn:["确定"],area:["430px","230px"],page:{html:'<div class="deleteAccountTip">为了您的账户安全，请先将所有订单完成出游，账户余额提现、银行卡解绑，完成后拨打客服电话<span class="phone">4007-999999</span>协助注销。</div>'},yes:function(){layer.closeAll()}})})},changeSecu:function(t){var th_el=t;var data=[{}];var _html=template("secuQuesHtml",data);th_el.bind("click",function(){$.layer({type:1,title:"安全问题",shadeClose:true,btns:1,btn:["确定"],area:["400px","400px"],page:{html:_html},yes:function(){security.check_qust()}})})},check_qust:function(){var strOptionText_s1=$("#s1").val();var strOptionText_s2=$("#s2").val();var strOptionText_s3=$("#s3").val();var a1=$("#a1").val().replace(/(^\s*)|(\s*$)/g,"");var a2=$("#a2").val().replace(/(^\s*)|(\s*$)/g,"");var a3=$("#a3").val().replace(/(^\s*)|(\s*$)/g,"");if(strOptionText_s1=="请选择安全问题"||strOptionText_s2=="请选择安全问题"||strOptionText_s3=="请选择安全问题"){$("#resulta-tip .input-tip-inner").html("请选择三条安全问题");return false}else if(strOptionText_s1==strOptionText_s2&&strOptionText_s2==strOptionText_s3){$("#resulta-tip .input-tip-inner").html("三个问题重复，请重新选择");return false}else if(strOptionText_s1==strOptionText_s2){$("#resulta-tip .input-tip-inner").html("问题一和问题二重复，请重新选择");return false}else if(strOptionText_s2==strOptionText_s3){$("#resulta-tip .input-tip-inner").html("问题二和问题三重复，请重新选择");return false}else if(strOptionText_s1==strOptionText_s3){$("#resulta-tip .input-tip-inner").html("问题一和问题三重复，请重新选择");return false}else if(a1==""||a2==""||a3==""){$("#resulta-tip .input-tip-inner").html("请输入安全问题的答案");return false}var url="/UserChangeAjax/setSafaQuestions";$.post(url,{s1:strOptionText_s1,s2:strOptionText_s2,s3:strOptionText_s3,a1:a1,a2:a2,a3:a3},function(data){if(data&&data.success&&data.data==1){layer.alert("恭喜，您的安全问题设置成功！");window.location.reload()}else{layer.alert("对不起，安全问题提交失败，请稍后重试！");return false}},"json")}};$(function(){security.init()});